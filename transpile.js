// Generated by CoffeeScript 1.11.1
var assert, clean, count, enclose, rtrim, spacesToTabs, tabcount, transpile;

assert = function(a, b) {
  if (b == null) {
    b = true;
  }
  if (!_.isEqual(a, b)) {
    return print(a + " != " + b);
  }
};

tabcount = function(s) {
  var i;
  i = 0;
  while (s[i] === '\t') {
    i += 1;
  }
  return i;
};

count = function(s, ch) {
  var arr;
  arr = s.split(ch);
  return arr.length - 1;
};

enclose = function(s) {
  var arr;
  if (count(s, '=') === 1) {
    return s;
  }
  arr = s.trim().split(' ');
  return arr[0] + ' (' + arr.slice(1).join(' ') + ')';
};

spacesToTabs = function(line) {
  if (line.indexOf('  ') === 0) {
    return '\t' + spacesToTabs(line.substring(2));
  }
  if (line.indexOf('\t') === 0) {
    return '\t' + spacesToTabs(line.substring(1));
  }
  if (line.indexOf(' \t') === 0) {
    return '\t' + spacesToTabs(line.substring(2));
  }
  return line;
};

assert(spacesToTabs('    '), '\t\t');

assert(spacesToTabs('\t  '), '\t\t');

assert(spacesToTabs('  \t'), '\t\t');

assert(spacesToTabs(' \t  '), '\t\t');

rtrim = function(str) {
  return str.replace(/\s\s*$/, '');
};

clean = function(s) {
  return s.split(' ').join("").split('\t').join("");
};

transpile = function(code) {
  var j, len, line, lines, tabs, temp;
  lines = code.split('\n');
  if (lines[0].indexOf('//ECMA') === 0) {
    return code;
  }
  temp = [];
  for (j = 0, len = lines.length; j < len; j++) {
    line = lines[j];
    line = spacesToTabs(line);
    tabs = tabcount(line);
    if (clean(line).length > 0) {
      temp.push(line);
    }
  }
  code = temp.join('\n');
  return CoffeeScript.compile(code);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNwaWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHJhbnNwaWxlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBQSxNQUFBLEdBQVMsU0FBQyxDQUFELEVBQUcsQ0FBSDs7SUFBRyxJQUFFOztFQUFTLElBQUcsQ0FBSSxDQUFDLENBQUMsT0FBRixDQUFVLENBQVYsRUFBYSxDQUFiLENBQVA7V0FBNEIsS0FBQSxDQUFNLENBQUEsR0FBSSxNQUFKLEdBQWEsQ0FBbkIsRUFBNUI7O0FBQWQ7O0FBRVQsUUFBQSxHQUFXLFNBQUMsQ0FBRDtBQUNULE1BQUE7RUFBQSxDQUFBLEdBQUk7QUFDSixTQUFNLENBQUUsQ0FBQSxDQUFBLENBQUYsS0FBTSxJQUFaO0lBQ0UsQ0FBQSxJQUFLO0VBRFA7U0FFQTtBQUpTOztBQU1YLEtBQUEsR0FBUSxTQUFDLENBQUQsRUFBRyxFQUFIO0FBQ04sTUFBQTtFQUFBLEdBQUEsR0FBTSxDQUFDLENBQUMsS0FBRixDQUFRLEVBQVI7U0FDTixHQUFHLENBQUMsTUFBSixHQUFXO0FBRkw7O0FBSVIsT0FBQSxHQUFVLFNBQUMsQ0FBRDtBQUNSLE1BQUE7RUFBQSxJQUFHLEtBQUEsQ0FBTSxDQUFOLEVBQVEsR0FBUixDQUFBLEtBQWdCLENBQW5CO0FBQ0UsV0FBTyxFQURUOztFQUVBLEdBQUEsR0FBTSxDQUFDLENBQUMsSUFBRixDQUFBLENBQVEsQ0FBQyxLQUFULENBQWUsR0FBZjtTQUNOLEdBQUksQ0FBQSxDQUFBLENBQUosR0FBUyxJQUFULEdBQWdCLEdBQUcsQ0FBQyxLQUFKLENBQVUsQ0FBVixDQUFZLENBQUMsSUFBYixDQUFrQixHQUFsQixDQUFoQixHQUF5QztBQUpqQzs7QUFNVixZQUFBLEdBQWUsU0FBQyxJQUFEO0VBQ2IsSUFBRyxJQUFJLENBQUMsT0FBTCxDQUFhLElBQWIsQ0FBQSxLQUFzQixDQUF6QjtBQUNFLFdBQU8sSUFBQSxHQUFPLFlBQUEsQ0FBYSxJQUFJLENBQUMsU0FBTCxDQUFlLENBQWYsQ0FBYixFQURoQjs7RUFFQSxJQUFHLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBYixDQUFBLEtBQXNCLENBQXpCO0FBQ0UsV0FBTyxJQUFBLEdBQU8sWUFBQSxDQUFhLElBQUksQ0FBQyxTQUFMLENBQWUsQ0FBZixDQUFiLEVBRGhCOztFQUVBLElBQUcsSUFBSSxDQUFDLE9BQUwsQ0FBYSxLQUFiLENBQUEsS0FBdUIsQ0FBMUI7QUFDRSxXQUFPLElBQUEsR0FBTyxZQUFBLENBQWEsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFmLENBQWIsRUFEaEI7O1NBRUE7QUFQYTs7QUFRZixNQUFBLENBQU8sWUFBQSxDQUFhLE1BQWIsQ0FBUCxFQUE0QixNQUE1Qjs7QUFDQSxNQUFBLENBQU8sWUFBQSxDQUFhLE1BQWIsQ0FBUCxFQUE0QixNQUE1Qjs7QUFDQSxNQUFBLENBQU8sWUFBQSxDQUFhLE1BQWIsQ0FBUCxFQUE0QixNQUE1Qjs7QUFDQSxNQUFBLENBQU8sWUFBQSxDQUFhLE9BQWIsQ0FBUCxFQUE2QixNQUE3Qjs7QUFFQSxLQUFBLEdBQVEsU0FBQyxHQUFEO1NBQ04sR0FBRyxDQUFDLE9BQUosQ0FBWSxRQUFaLEVBQXNCLEVBQXRCO0FBRE07O0FBSVIsS0FBQSxHQUFRLFNBQUMsQ0FBRDtTQUFPLENBQUMsQ0FBQyxLQUFGLENBQVEsR0FBUixDQUFZLENBQUMsSUFBYixDQUFrQixFQUFsQixDQUFxQixDQUFDLEtBQXRCLENBQTRCLElBQTVCLENBQWlDLENBQUMsSUFBbEMsQ0FBdUMsRUFBdkM7QUFBUDs7QUFFUixTQUFBLEdBQVksU0FBQyxJQUFEO0FBQ1YsTUFBQTtFQUFBLEtBQUEsR0FBUSxJQUFJLENBQUMsS0FBTCxDQUFXLElBQVg7RUFDUixJQUFHLEtBQU0sQ0FBQSxDQUFBLENBQUUsQ0FBQyxPQUFULENBQWlCLFFBQWpCLENBQUEsS0FBOEIsQ0FBakM7QUFDRSxXQUFPLEtBRFQ7O0VBRUEsSUFBQSxHQUFPO0FBQ1AsT0FBQSx1Q0FBQTs7SUFDRSxJQUFBLEdBQU8sWUFBQSxDQUFhLElBQWI7SUFDUCxJQUFBLEdBQU8sUUFBQSxDQUFTLElBQVQ7SUFDUCxJQUFHLEtBQUEsQ0FBTSxJQUFOLENBQVcsQ0FBQyxNQUFaLEdBQXFCLENBQXhCO01BQ0UsSUFBSSxDQUFDLElBQUwsQ0FBVSxJQUFWLEVBREY7O0FBSEY7RUFLQSxJQUFBLEdBQU8sSUFBSSxDQUFDLElBQUwsQ0FBVSxJQUFWO1NBQ1AsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsSUFBckI7QUFYVSIsInNvdXJjZXNDb250ZW50IjpbImFzc2VydCA9IChhLGI9dHJ1ZSkgLT4gaWYgbm90IF8uaXNFcXVhbChhLCBiKSB0aGVuIHByaW50IGEgKyBcIiAhPSBcIiArIGJcclxuXHJcbnRhYmNvdW50ID0gKHMpIC0+XHJcbiAgaSA9IDBcclxuICB3aGlsZSBzW2ldPT0nXFx0J1xyXG4gICAgaSArPSAxXHJcbiAgaVxyXG5cclxuY291bnQgPSAocyxjaCkgLT5cclxuICBhcnIgPSBzLnNwbGl0KGNoKVxyXG4gIGFyci5sZW5ndGgtMVxyXG5cclxuZW5jbG9zZSA9IChzKSAtPlxyXG4gIGlmIGNvdW50KHMsJz0nKSA9PSAxXHJcbiAgICByZXR1cm4gcyAgICBcclxuICBhcnIgPSBzLnRyaW0oKS5zcGxpdCgnICcpXHJcbiAgYXJyWzBdICsgJyAoJyArIGFyci5zbGljZSgxKS5qb2luKCcgJykgKyAnKSdcclxuXHJcbnNwYWNlc1RvVGFicyA9IChsaW5lKSAtPlxyXG4gIGlmIGxpbmUuaW5kZXhPZignICAnKSA9PSAwXHJcbiAgICByZXR1cm4gJ1xcdCcgKyBzcGFjZXNUb1RhYnMgbGluZS5zdWJzdHJpbmcgMlxyXG4gIGlmIGxpbmUuaW5kZXhPZignXFx0JykgPT0gMFxyXG4gICAgcmV0dXJuICdcXHQnICsgc3BhY2VzVG9UYWJzIGxpbmUuc3Vic3RyaW5nIDFcclxuICBpZiBsaW5lLmluZGV4T2YoJyBcXHQnKSA9PSAwXHJcbiAgICByZXR1cm4gJ1xcdCcgKyBzcGFjZXNUb1RhYnMgbGluZS5zdWJzdHJpbmcgMlxyXG4gIGxpbmVcclxuYXNzZXJ0IHNwYWNlc1RvVGFicygnICAgICcpLCdcXHRcXHQnXHJcbmFzc2VydCBzcGFjZXNUb1RhYnMoJ1xcdCAgJyksJ1xcdFxcdCdcclxuYXNzZXJ0IHNwYWNlc1RvVGFicygnICBcXHQnKSwnXFx0XFx0J1xyXG5hc3NlcnQgc3BhY2VzVG9UYWJzKCcgXFx0ICAnKSwnXFx0XFx0J1xyXG5cclxucnRyaW0gPSAoc3RyKSAtPlxyXG4gIHN0ci5yZXBsYWNlIC9cXHNcXHMqJC8sICcnXHJcblxyXG4jIHRhciBib3J0IGFsbGEgYmxhbmthIG9jaCB0YWJiYXJcclxuY2xlYW4gPSAocykgLT4gcy5zcGxpdCgnICcpLmpvaW4oXCJcIikuc3BsaXQoJ1xcdCcpLmpvaW4oXCJcIilcclxuXHJcbnRyYW5zcGlsZSA9IChjb2RlKSAtPlxyXG4gIGxpbmVzID0gY29kZS5zcGxpdCAnXFxuJ1xyXG4gIGlmIGxpbmVzWzBdLmluZGV4T2YoJy8vRUNNQScpID09IDBcclxuICAgIHJldHVybiBjb2RlXHJcbiAgdGVtcCA9IFtdXHJcbiAgZm9yIGxpbmUgaW4gbGluZXMgXHJcbiAgICBsaW5lID0gc3BhY2VzVG9UYWJzIGxpbmVcclxuICAgIHRhYnMgPSB0YWJjb3VudCBsaW5lXHJcbiAgICBpZiBjbGVhbihsaW5lKS5sZW5ndGggPiAwXHJcbiAgICAgIHRlbXAucHVzaCBsaW5lXHJcbiAgY29kZSA9IHRlbXAuam9pbiAnXFxuJ1xyXG4gIENvZmZlZVNjcmlwdC5jb21waWxlIGNvZGUiXX0=
//# sourceURL=C:\github\p5Dojo\transpile.coffee